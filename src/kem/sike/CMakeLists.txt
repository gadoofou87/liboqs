# FIXMEOQS: enable FAST mode, assembly
set(SRCS kem_sike.c)
if(OQS_ENABLE_SI_P434)
    set(SRCS ${SRCS} P434/P434.c)
endif()
if(OQS_ENABLE_SI_P434_COMPRESSED)
    set(SRCS ${SRCS} P434/P434_compressed.c)
endif()
if(OQS_ENABLE_SI_P503)
    set(SRCS ${SRCS} P503/P503.c)
endif()
if(OQS_ENABLE_SI_P503_COMPRESSED)
    set(SRCS ${SRCS} P503/P503_compressed.c)
endif()
if(OQS_ENABLE_SI_P610)
    set(SRCS ${SRCS} P610/P610.c)
endif()
if(OQS_ENABLE_SI_P610_COMPRESSED)
    set(SRCS ${SRCS} P610/P610_compressed.c)
endif()
if(OQS_ENABLE_SI_P751)
    set(SRCS ${SRCS} P751/P751.c)
endif()
if(OQS_ENABLE_SI_P751_COMPRESSED)
    set(SRCS ${SRCS} P751/P751_compressed.c)
endif()

add_library(sike OBJECT ${SRCS})
target_compile_definitions(sike PRIVATE _GENERIC_)
if(${ARCH} STREQUAL "x86")
    target_compile_definitions(sike PRIVATE _X86_)
elseif(${ARCH} STREQUAL "x86_64")
    target_compile_definitions(sike PRIVATE _AMD64_)
elseif(${ARCH} STREQUAL "arm")
    target_compile_definitions(sike PRIVATE _ARM_)
elseif(${ARCH} STREQUAL "arm64")
    target_compile_definitions(sike PRIVATE _ARM64_)
endif()
