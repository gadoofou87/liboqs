cmake_minimum_required (VERSION 3.5)

project(cpu_features-download NONE)

include(ExternalProject)
ExternalProject_Add(cpu_features
    GIT_REPOSITORY    https://github.com/google/cpu_features.git
    SOURCE_DIR        "${CMAKE_CURRENT_BINARY_DIR}/cpu_features-src"
    BINARY_DIR        "${CMAKE_CURRENT_BINARY_DIR}/cpu_features-build"
    CMAKE_ARGS
        -DBUILD_SHARED_LIBS=${BUILD_SHARED_LIBS}
        -DCMAKE_WINDOWS_EXPORT_ALL_SYMBOLS=TRUE
    INSTALL_COMMAND   ""
    TEST_COMMAND      ""
)
